{"version":3,"sources":["../src/event-manager.ts","../src/namespaced-event-delegation.ts","../src/index.ts","demo.ts"],"names":[],"mappings":";;;;;;AAOA,AEPA,IFOA,AEPA,qBFOA,QEPA,GAAA,OAAA,CAAA,+BAAA,CAAA;AFOA;AAAA,AEPS,MAAA,CAAA,KFOT,SEPS,CAAA,OAAA,EAAA,SAAA,EAAA;AFYP,AEZO,EAAA,SFYP,CEZO,EAAA,IAAA,cFYP,GAAA;AAAA,AEZO,EAAA,GAAA,EAAA,CFYP,KAAA,GAAA,IAAA,EEZO;AAAA,WAAA,6BAAA,CAAA,OAAA;AFQC,AERM,ACAhB,IAAA,KHQU,EGRV,GAAA,IHQU,GAA2B,EAA3B,MGRV,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;ADAS,CAAA;AFqBP,AGpBF,IAAM,KHoBJ,QAAA,EGpBmB,CHoBR,EGpBW,IAAI,IHoBd,GGpBc,CAAA,OAAJ,EAAxB,CHoBa,EAAyB,KAAzB,EAA8B;AACvC,MAAA,KAAI,CAAC,SAAL,CAAe,IAAf,CAAoB;AAAE,AGnB1B,IAAM,IHmBoB,IGnBZ,GAAI,OHmBsB,EAAA,GGnBtB,WHmBM;AAAkB,AGlBxC,MAAM,EHkBkC,EGlB9B,GAAG,EHkBkC,AGlB/C,EHkBiD;AAA3B,OAApB;AGhBF,WAAS,MAAT,GAAe;AHiBb,AGhBA,QAAM,KHgBC,KAAP,EGhBkB,GAAG,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAArB;AHiBD,KAHD;AGbE,QAAM,SAAS,GAAG,SAAZ,SAAY,CAAC,MAAD,EAAO;AHkB3B,AGjBI,SHiBJ,IGjBI,QHiBJ,GAAe,EGjBA,MAAM,CAAC,CHiBN,QGjBZ,GAA2B,GHiBhB,EAAuB,MGjBlC,GAAuC,MAAM,CAAC,eAA9C,GAA6D,WAA7D,GAAyE,MAAM,CAAC,aAAhF,GAA6F,WAA7F,GAAyG,MAAM,CAAC,MAAhH,GAAsH,YAAtH;AHkBF,AGlBoI,KADpI,KHmBM,aAAa,GAAG,KAAI,CAAC,SAAL,CAAe,IAAf,CAAoB,UAAC,KAAD,EAAM;AAAK,eAAA,KAAK,CAAC,cAAN,KAAyB,cAAzB;AAAuC,AGjB5F,OHiBsB,CAAtB,AGjBI,UAAU,GAAG,IAAjB;AAEA,IAAA,YAAY,CAAC,SAAb,GAAyB,UAAU,CAAC,GAAX,CAAe,UAAC,GAAD,EAAI;AHgB5C,AGhBiD,MHgBjD,KAAI,CAAC,CGhB4C,QHgBjD,CAAe,AGhB2C,CAAC,GAAD,CAAT,EHgBjD,CAAuB,UAAC,KAAD,EAAQ,KAAR,EAAa;AAClC,AGjB6D,KAAtC,EAAwC,IAAxC,CHiBnB,AGjBgE,EAA7C,CAAzB,EHiBW,CAAC,cAAN,KAAyB,cAA7B,EAA6C;AAC3C,AGjBL,iBHiBY,KAAI,CAAC,SAAL,CAAe,KAAf,CAAP;AACD;AACF,AGjBH,OHaE,EGbK,UAAU,KAAV,EAAe;AACZ,QAAA,aAAa,GAAK,KAAK,CAAA,aAAvB;AHkBR,AGjBA,IAAA,IAAI,CAAC,IHiBE,AGjBP,CAAU,YHiBV;AACD,AGjBG,KHQJ,CGRI,SAAS,EAAE,KAAK,CAAC,SADT;AAER,MAAA,eAAe,EAAE,CACf,KAAK,CAAC,eAAN,CAAsB,OAAtB,CAA8B,iBAA9B,EADe,EAEf,KAAK,CAAC,eAAN,CAAsB,SAAtB,CAAgC,QAAhC,GAA2C,IAA3C,GAAkD,OAAlD,CAA0D,GAA1D,EAA+D,GAA/D,CAFe,EAGf,IAHe,CAGV,GAHU,CAFT;AHoBZ,AGdI,MAAA,GHcJ,SAAA,CGdiB,EHcL,AGdU,KAAK,CAAC,IHcf,SGdS,CAAoB,IHc9B,AGdU,EHcyB,CGdD,OAAxB,GAAgC,KAAK,CAAC,aAAN,CAAoB,MAApB,CAA2B,SAA3B,CAC/C,QAD+C,GAE/C,OAF+C,CAEvC,GAFuC,EAElC,GAFkC,CAN1C;AHoBC,AGXT,MAAA,IHWS,EGXH,EAAK,UHWF,GGXe,CAAC,CHWhB,KAAA,CAAA,AGXE,CAAsB,CHWxB,gBGXE,KAAyC,GAAzC,GAA6C,aAAa,CAAC,SAAd,CAAwB,QAAxB,GAAmC,OAAnC,CAA2C,GAA3C,EAAgD,GAAhD;AHW/C,AGpBD,KAAV,GHoBW,cAAA,GAAA,SAAA;AAAkC,AGT7C,IAAA,MAAM;AACP,GAdD;AHuBE,AGRH,CA3BgB,EAAjB,UHmCI,cAAc,GAAG,KAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,UAAC,KAAD,EAAM;AAAK,eAAA,KAAK,CAAC,cAAN,KAAyB,cAAzB;AAAuC,AGN7F,MAAM,CHMe,AGNd,CHMW,GAA+E,KAAI,CAAC,MGNtG,CAAwB,EHMpB,gBGNJ,EAA4C,YAAA;AHMmE,AGL7G,KHIA,CGJM,eAAe,GAAG,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAAxB;AAEA,MAAM,gBAAgB,GAAG;AHtBvB,AGuBA,IAAA,IHvBI,UGuBU,EAAE,SHvBS,CAAC,CGsBH,OHtBvB,EAAoC;AAClC,AGuBF,IAAA,SHvBS,MGuBM,EAAA,aHvBe,CAAC,CGqBR,OHrBrB;AACD,AGuBD,IAAA,OAAO,EAAE,iBAAC,KAAD,EAAM;AACb,MAAA,QAAQ,CAAC,KAAD,CAAR;AHtBF,AGuBC,IHvBD,CGkBuB,oBHlBF,CAAC,QAAtB,GAAiC,IAAjC;AACA,AGuBA,IAAA,OHvBO,EGuBE,EHvBT,AGuBW;AHtBZ,AGgBwB,GAAzB;AFnCF,AE4CE,IF5CF,EE4CQ,aF5CR,AE4CqB,GF5CrB,AE4CwB,eF5CxB,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;ADuCA,AGMI,IAAA,KHNJ,UGMmB,EAAE,QAAQ,CHN7B,AGM8B,aAAT,CAAuB,cAAvB,CADG;AHrCxB,ACGA,AEoCI,CHvCJ,EAAA,CCGA,AEoCI,OAAO,EAAE,gBFpCb,CEoCc,KAAD,EAAM;AFpCnB,AEqCM,UAAM,OAAO,GAAG,eAAe,CAAC,GAAhB,CAAoB;AHN1C,AC/BA,AEsCQ,OHPR,CAAA,AGOQ,EFtCR,KD+BA,CC/BA,ED+Be,AC/Bf,KEsCuB,EAAE,QAAQ,CAAC,KHPlC,QGOyB,CAAuB,cAAvB,CADiB;AFrCF,AEuChC,EFvCgC,MEuChC,GFvCgC,CAAA,KEuCvB,EAAE,kBFvCqB,EAAA,MAAA,CAAA;AEqCE,OAApB,CAAhB;AFrCN,AEyCM,MAAA,KFzCN,AEyCW,CAAC,aAAN,CAAoB,SAApB,CFzCN,AEyCoC,GFzCpC,GEyCM,CAAqC,aAArC;AFzCN,AE0CM,MAAA,EF1CN,KAAA,AE0Ca,CAAC,EF1Cd,CE0CM,CAAY,IF1ClB,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;AE0CoB,QAAA,OAAO,EAAA;AFzCzB,AEyCgB,IFzChB,GEyCI,EFzCJ,CAAA,gBAAA,GAAmB,UAAC,SAAD,EAAU;AAAK,AE0C9B,MAAA,OF1C8B,CE0CtB,CAAC,KAAD,CAAR,CF1CuC,CAAC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAA;AAAuB,AE2CtD,KF3CH,AEiCsB;AAWpB,IAAA,SAAS,EAAE;AF1Cb,AE+BsB,GAAtB,CF/BA,KAAA,CAAA,EAAA,GAAK,UAAC,EAAD,EAAsF;AE6C3F,MAAM,IF7CE,SAAS,EE6CI,CF7CJ,EAAA,AE6CO,CF7CP;AE8Cf,IAAA,MF9CiB,QE8CH,EAAE,IF9Ce,EE6CT,CF7CS,EAAA,CAAA;AE+C/B,IAAA,MF/CiC,OAAO,EE+CzB,CF/CyB,CE+CzB,CF/CyB,CAAA,aE6ClB;AAGtB,IAAA,MFhD0C,CEgDnC,EAAE,YFhDgD,GAAA,EAAA,AEgD/C,CFhD+C,IEgDhD,EAAM;AACb,MAAA,IFjDyD,EAAA,CEiDlD,CAAC,CFjDiD,EAAA,AEiDzD,CFjDyD,AEiD7C,KAAZ;AACQ,UFlDiD,AEkDjD,IFlDqD,GAAA,EAAA,IEkDxC,CFlDwC,EEkDnC,GFlDmC,CAAA,CEkD9B,CAAA,CFlDiC,KAAH,GAAQ,IEkD7D;AACR,MAAA,aAAa,CAAC,SAAd,CAAwB,GAAxB,CAA4B,OAA5B;AFlDF,AEmDE,MAAA,IFnDI,IEmDI,CAAC,KAAD,CAAR,GFnDkB,GAAG,SAAjB,cAAiB,CAAC,KAAD,EAAM;AAC3B,AEmDD,KARqB,OF3ChB,aAAa,GAAG;AAClB,AEmDJ,IAAA,MFnDI,GEmDK,EAAE,IFnDE,EAAA,SADS;AAElB,AEyCkB,GAAxB,OFzCM,eAAe,EAAA,eAFG;AAGlB,AEoDN,MAAM,IFpDA,SEoDa,GAAG,CFpDH,EAAE,eAHG;AAIlB,AEoDJ,IAAA,MFpDI,QEoDU,EAAE,GFpDC,EAAE,CEmDC;AFvDE,AEyDtB,IAAA,KFzDE,UEyDa,EAAA,eAFK;AAGpB,IAAA,OAAO,EAAE,iBAAC,KAAD,EAAM;AFpDb,AEqDQ,UAAA,EFrDJ,WEqDiB,GFrDrB,AEqD0B,EFrDN,GEqDW,CAAA,aAAvB;AFpDN,AEqDF,MAAA,QFrDQ,KEqDK,CFrDC,AEqDA,GFrDG,KAAK,CAAC,AEqDvB,CAAwB,KFrDP,CAAa,AEqD9B,CAA+B,MFrDd,CAAqB,AEqDtC,cFrDiB,CAAf;AEsDF,MAAA,QAAQ,CAAC,KAAD,CAAR;AFrDE,AEsDH,KAPmB,SF/CZ,CAAC,MAAL,EAAa;AACX,AEsDN,IAAA,SAAS,EAAE,IFtDE,KAAP;AACD,AE6Ce,GAAtB;AAWA,EAAA,eAAe,CAAC,EAAhB,CAAmB,gBAAnB;AFtDM,AEuDN,EAAA,QFvDM,OEuDS,CAAC,EAAhB,CAAmB,EFvDA,GAAA,QAAA,AEuDnB,CFvDmB,QAAA,CAAA,EAAA,EACR,aADQ,CAAA,EACK;AAChB,AEsDR,EAAA,UFtDQ,KEsDO,CAAC,EAAhB,CAAmB,IFtDE,EAAE,MAAM,GEsD7B,CFtDiC,aAAa,CAAC;AADvB,AEwDxB,EAAA,SFzDmB,CAAb,KEyDS,CAAC,EAAhB,CAAmB,aAAnB;AFrDK,AEsDL,EAAA,OAAO,CAAC,GAAR,CACE,eAAe,CAAC,EAAhB,CAAmB;AACjB,IAAA,SAAS,EAAE,eADM;AFtDjB,AEwDA,IAAA,WFxDO,IEwDQ,EAAE,CFxDH,CAAC,MEwDU,CAAC,IAFT,EFtDH,CAAd;AACD,AEwDC,IAAA,GF3EF,WE2EgB,EAAE,SAHC;AAIjB,IAAA,OAAO,EAAE,iBAAC,KAAD,EAAM;AFvDjB,AEwDI,MFxDJ,AEwDI,QAAQ,CAAC,KAAD,CFxDG,AEwDX,CFxDY,gBAAhB,CAAiC,KAAI,CAAC,gBAAL,CAAsB,SAAtB,CAAjC,EAAmE,KAAI,CAAC,QAAL,CAAc,SAAd,EAAyB,cAAzB,CAAnE,EAA6G;AAC3G,AEwDE,MAAA,EFxDF,GEwDO,CFxDH,AEwDI,EFxDJ,WEwDF,CAAoB,cAApB;AFzDyG,AE0DzG,MAAA,CF1DJ,IE0DS,CAAC,aAAN,CAAoB,eAApB;AFtDJ,AEuDG,aFvDI,KAAI,CAAC,SAAL,EAAP;AACD,AE8CoB,GAAnB,CADF,CFxEA;AEqFA,EAAA,eAAe,CAAC,IAAhB,CAAqB;AFxDrB,AEyDE,IFzDF,AEyDE,KFzDF,CAAA,IAAA,GAAO,EEyDU,EAAE,MFzDX,EAAD,AEyDoB,CAAC,CFzDmD,YEyD5D,CAAuB,WAAvB,CADE;AAEnB,IAAA,MF1DQ,GE0DC,EAAE,IF1DM,GAAA,EAAA,CAAA;AEwDE,GAArB,OFxDqB,cAAc,GAAA,EAAA,CAAA;AE4DpC,CAtED,SFUuC,OAAO,GAAA,EAAA,CAAA;UAAE,eAAe,GAAA,EAAA,CAAA;AAC3D,aAAA,KAAI,CAAC,EAAL,CAAQ;AACN,QAAA,SAAS,EAAA,SADH;AAEN,QAAA,cAAc,EAAA,cAFR;AAGN,QAAA,OAAO,EAAA,OAHD;AAIN,QAAA,eAAe,EAAA,eAJT;AAKN,QAAA,IAAI,EAAE;AALA,OAAR,CAAA;AAME,KAPJ;;AASA,IAAA,KAAA,CAAA,GAAA,GAAM,UAAC,EAAD,EAA+C;UAA5C,eAAe,GAAA,EAAA,CAAA;UAAE,SAAS,GAAA,EAAA,CAAA;;AACjC,MAAA,KAAI,CAAC,SAAL,CAAe,SAAf,EAA0B,OAA1B,CAAkC,UAAC,KAAD,EAAM;AACtC,QAAA,eAAe,CAAC,mBAAhB,CAAoC,KAAI,CAAC,gBAAL,CAAsB,SAAtB,CAApC,EAAsE,KAAK,CAAC,OAA5E;AACD,OAFD;;AAIA,aAAO,KAAI,CAAC,YAAL,CAAkB,SAAlB,CAAP;AACD,KAND;;AAQA,IAAA,KAAA,CAAA,IAAA,GAAO,UAAC,EAAD,EAA+C;UAA5C,eAAe,GAAA,EAAA,CAAA;UAAE,SAAS,GAAA,EAAA,CAAA;AAClC,UAAM,GAAG,GAAG,QAAQ,CAAC,WAAT,CAAqB,OAArB,CAAZ;AACA,MAAA,GAAG,CAAC,SAAJ,CAAc,KAAI,CAAC,gBAAL,CAAsB,SAAtB,CAAd,EAAgD,IAAhD,EAAsD,IAAtD;AACA,aAAO,eAAe,CAAC,aAAhB,CAA8B,GAA9B,CAAP;AACD,KAJD;;;AAKD;;AAAD,SAAA,yBAAA;AAtDA,CAAA,CAAwC,eAAA,CAAA,OAAxC,CAAA;;AAwDA,OAAA,CAAA,OAAA,GAAe,yBAAf","file":"demo.56710ae6.js","sourceRoot":"../demo","sourcesContent":["interface EmEventsItem {\n  eventNamespace: string;\n  handler;\n}\n\ninterface EmEventsItems extends Array<EmEventsItem> {}\n\nclass EventManagerSingleton {\n  private eventsMap: EmEventsItems = [];\n\n  static instance: EventManagerSingleton;\n\n  constructor() {\n    if (EventManagerSingleton.instance) {\n      return EventManagerSingleton.instance;\n    }\n\n    EventManagerSingleton.instance = this;\n    return this;\n  }\n\n  addEvent = (eventNamespace: string, event) => {\n    this.eventsMap.push({ eventNamespace, handler: event });\n    return event;\n  };\n\n  removeEvents = (eventNamespace: string): boolean => {\n    const eventsRemoved = this.eventsMap.some((event) => event.eventNamespace === eventNamespace);\n    this.eventsMap.forEach((event, index) => {\n      if (event.eventNamespace === eventNamespace) {\n        delete this.eventsMap[index];\n      }\n    });\n\n    return eventsRemoved;\n  };\n\n  getEvents = (eventNamespace: string = undefined): EmEventsItems =>\n    eventNamespace ? this.eventsMap.filter((event) => event.eventNamespace === eventNamespace) : this.eventsMap;\n}\n\nexport default EventManagerSingleton;\n","import EventManager from './event-manager';\n\ninterface DelegatedEvent {\n  eventName: string;\n  delegatedTarget: Element;\n  handler?: Function;\n  targetSelector?: string;\n  once?: boolean;\n}\n\nclass NamespacedEventDelegation extends EventManager {\n  extractEventName = (eventName) => eventName.split('.')[0];\n\n  on = ({ eventName, targetSelector, handler, delegatedTarget, once = false }: DelegatedEvent) => {\n    const delegatedEvent = (event) => {\n      let handlerParams = {\n        eventName,\n        delegatedTarget,\n        currentTarget: delegatedTarget,\n        originalEvent: event\n      };\n      if (targetSelector) {\n        const target = event.target.closest(targetSelector);\n        if (!target) {\n          return false;\n        }\n\n        handlerParams = {\n          ...handlerParams,\n          currentTarget: target || handlerParams.delegatedTarget\n        };\n      }\n      return handler(handlerParams);\n    };\n\n    delegatedTarget.addEventListener(this.extractEventName(eventName), this.addEvent(eventName, delegatedEvent), {\n      once\n    });\n\n    return this.getEvents();\n  };\n\n  once = ({ eventName, targetSelector, handler, delegatedTarget }: DelegatedEvent) =>\n    this.on({\n      eventName,\n      targetSelector,\n      handler,\n      delegatedTarget,\n      once: true\n    });\n\n  off = ({ delegatedTarget, eventName }: DelegatedEvent): boolean => {\n    this.getEvents(eventName).forEach((event) => {\n      delegatedTarget.removeEventListener(this.extractEventName(eventName), event.handler);\n    });\n\n    return this.removeEvents(eventName);\n  };\n\n  fire = ({ delegatedTarget, eventName }: DelegatedEvent): boolean => {\n    const evt = document.createEvent('Event');\n    evt.initEvent(this.extractEventName(eventName), true, true);\n    return delegatedTarget.dispatchEvent(evt);\n  };\n}\n\nexport default NamespacedEventDelegation;\n","export { default } from './namespaced-event-delegation';\n","import EventDelegation from '../src/index';\nconst eventDelegation = new EventDelegation();\n\nconst logEvent = (() => {\n  const logs = [];\n\n  function output() {\n    const consoleOuput = document.querySelector('#console');\n    const logMarkup = (output) =>\n      `<tr><td>${output.eventName}</td><td>${output.delegatedTarget}</td><td>${output.originalEvent}</td><td>${output.target}</td></tr>`;\n    let revertlogs = logs;\n\n    consoleOuput.innerHTML = revertlogs.map((log) => logMarkup(log)).join('');\n  }\n\n  return function (event) {\n    const { currentTarget } = event;\n    logs.push({\n      eventName: event.eventName,\n      delegatedTarget: [\n        event.delegatedTarget.tagName.toLocaleLowerCase(),\n        event.delegatedTarget.classList.toString().trim().replace(' ', '.')\n      ].join('.'),\n      originalEvent: `${event.originalEvent.type} => .${event.originalEvent.target.classList\n        .toString()\n        .replace(' ', '.')}`,\n      target: `${currentTarget.tagName.toLocaleLowerCase()}.${currentTarget.classList.toString().replace(' ', '.')}`\n    });\n    output();\n  };\n})();\n\nwindow.addEventListener('DOMContentLoaded', function () {\n  const delegatedTarget = document.querySelector('.content');\n\n  const myDelegatedEvent = {\n    targetSelector: '.btn--ned',\n    delegatedTarget,\n    handler: (event) => {\n      logEvent(event);\n    },\n    eventName: 'click.btnNed'\n  };\n\n  const myDirectEvent = {\n    delegatedTarget: document.querySelector('.btn--direct'),\n    handler: (event) => {\n      const removed = eventDelegation.off({\n        delegatedTarget: document.querySelector('.btn--direct'),\n        eventName: 'click.btnDirect'\n      });\n      event.currentTarget.classList.remove('btn--direct');\n      console.log({ removed });\n      logEvent(event);\n    },\n    eventName: 'click.btnDirect'\n  };\n\n  const allBtnMousedown = {\n    targetSelector: '.btn',\n    delegatedTarget,\n    handler: (event) => {\n      console.log(event);\n      const { currentTarget } = event;\n      currentTarget.classList.add('click');\n      logEvent(event);\n    },\n    eventName: 'mousedown.AllBtn'\n  };\n\n  const allBtnMouseup = {\n    targetSelector: '.btn',\n    delegatedTarget,\n    handler: (event) => {\n      const { currentTarget } = event;\n      currentTarget.classList.remove('click');\n      logEvent(event);\n    },\n    eventName: 'mouseup.AllBtn'\n  };\n\n  eventDelegation.on(myDelegatedEvent);\n  eventDelegation.on(myDirectEvent);\n  eventDelegation.on(allBtnMousedown);\n  eventDelegation.on(allBtnMouseup);\n  console.log(\n    eventDelegation.on({\n      eventName: 'submit.myForm',\n      delegatedTarget: document.body,\n      targetSelector: '.myForm',\n      handler: (event) => {\n        logEvent(event);\n        event.originalEvent.preventDefault();\n        event.originalEvent.stopPropagation();\n      }\n    })\n  );\n\n  eventDelegation.fire({\n    delegatedTarget: document.querySelector('.btn--ned'),\n    eventName: 'click'\n  });\n});\n"]}