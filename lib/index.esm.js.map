{"version":3,"file":"index.esm.js","sources":["../src/index.ts"],"sourcesContent":["const enableEventDelegation = (\n  eventsPrefix = '',\n  eventsMapPrefix = '_'\n): void => {\n  window[`${eventsMapPrefix}eventsMap`] = [];\n\n  HTMLElement.prototype[`${eventsPrefix}on`] = function (...args) {\n    const [eventNamespace, targetSelector, handler, once = { once: false }] = args;\n    const [eventName] = eventNamespace.split('.');\n    const eventsMap = window[`${eventsMapPrefix}eventsMap`];\n\n    if (typeof targetSelector === 'function' && handler === undefined) {\n      const newHandler: Function = targetSelector;\n\n      eventsMap[eventNamespace] = function (event) {\n        newHandler.call(this, {\n          eventNamespace,\n          target: this,\n          delegatedTarget: this,\n          originalEvent: event\n        });\n      };\n    } else {\n      eventsMap[eventNamespace] = function (event) {\n        for (\n          let { target } = event;\n          target && target !== this;\n          target = target.parentNode\n        ) {\n          if (target.matches !== undefined && target.matches(targetSelector)) {\n            handler.call(this, {\n              target,\n              eventNamespace,\n              delegatedTarget: this,\n              originalEvent: event\n            });\n            break;\n          }\n        }\n      };\n    }\n    this.addEventListener(eventName, eventsMap[eventNamespace], once);\n    return this;\n  };\n\n  HTMLElement.prototype[`${eventsPrefix}off`] = function (\n    eventNamespace: string\n  ) {\n    const [eventName] = eventNamespace.split('.');\n    const targetedEvent = window[`${eventsMapPrefix}eventsMap`];\n    this.removeEventListener(eventName, targetedEvent[eventNamespace]);\n    delete targetedEvent[eventNamespace];\n    return this;\n  };\n\n  HTMLElement.prototype[`${eventsPrefix}once`] = function (\n    eventNamespace,\n    targetSelector,\n    handler: Function\n  ) {\n    this[`${eventsPrefix}on`](eventNamespace, targetSelector, handler, {\n      once: true\n    });\n    return this;\n  };\n};\n\nexport default enableEventDelegation;\n"],"names":["eventsPrefix","eventsMapPrefix","window","HTMLElement","prototype","eventNamespace","targetSelector","handler","once","split","eventName","eventsMap","undefined","newHandler","event","call","this","target","delegatedTarget","originalEvent","parentNode","matches","addEventListener","targetedEvent","removeEventListener"],"mappings":"eAA8B,SAC5BA,EACAC,YADAD,IAAAA,EAAe,aACfC,IAAAA,EAAkB,KAElBC,OAAUD,eAA8B,GAExCE,YAAYC,UAAaJ,QAAoB,0CACpCK,OAAgBC,OAAgBC,cAASC,aAAO,CAAEA,MAAM,OAC3CH,EAAeI,MAAM,KAAlCC,OACDC,EAAYT,OAAUD,eAE5B,GAA8B,mBAAnBK,QAA6CM,IAAZL,EAAuB,CACjE,IAAMM,EAAuBP,EAE7BK,EAAUN,GAAkB,SAAUS,GACpCD,EAAWE,KAAKC,KAAM,CACpBX,eAAAA,EACAY,OAAQD,KACRE,gBAAiBF,KACjBG,cAAeL,UAInBH,EAAUN,GAAkB,SAAUS,GACpC,QACQG,EAAWH,EAAXG,OACNA,GAAUA,IAAWD,KACrBC,EAASA,EAAOG,WAEhB,QAAuBR,IAAnBK,EAAOI,SAAyBJ,EAAOI,QAAQf,GAAiB,CAClEC,EAAQQ,KAAKC,KAAM,CACjBC,OAAAA,EACAZ,eAAAA,EACAa,gBAAiBF,KACjBG,cAAeL,IAEjB,QAMR,OADAE,KAAKM,iBAAiBZ,EAAWC,EAAUN,GAAiBG,SAI9DL,YAAYC,UAAaJ,SAAqB,SAC5CK,SAEoBA,EAAeI,MAAM,KACnCc,EAAgBrB,OAAUD,eAGhC,OAFAe,KAAKQ,yBAA+BD,EAAclB,WAC3CkB,EAAclB,SAIvBF,YAAYC,UAAaJ,UAAsB,SAC7CK,EACAC,EACAC,GAKA,OAHAS,KAAQhB,QAAkBK,EAAgBC,EAAgBC,EAAS,CACjEC,MAAM"}