{"version":3,"file":"index.modern.js","sources":["../src/index.ts"],"sourcesContent":["interface DelegatedEvent {\n  eventName: string;\n  delegatedTarget: Element;\n  handler?: Function;\n  target?: string;\n  once?: boolean;\n}\n\nclass EventDelegation {\n  private eventsMap = [];\n\n  extractEventName = (eventName) => eventName.split('.')[0];\n\n  on = ({\n    eventName,\n    target = undefined,\n    handler,\n    delegatedTarget,\n    once = false\n  }: DelegatedEvent) => {\n    let newEvent;\n    let currentTarget = delegatedTarget;\n    const handlerParams = {\n      eventName,\n      currentTarget,\n      delegatedTarget\n    };\n\n    if (!target) {\n      newEvent = (event) => {\n        handler({ ...handlerParams, originalEvent: event });\n      };\n    } else {\n      newEvent = (event) => {\n        currentTarget = event.target;\n        for (\n          currentTarget;\n          currentTarget && currentTarget !== delegatedTarget;\n          currentTarget = currentTarget.parentNode as Element\n        ) {\n          if (\n            currentTarget.matches !== undefined &&\n            currentTarget.matches(target)\n          ) {\n            handler({ ...handlerParams, currentTarget, originalEvent: event });\n            break;\n          }\n        }\n      };\n    }\n\n    this.eventsMap[eventName] = newEvent;\n\n    delegatedTarget.addEventListener(\n      this.extractEventName(eventName),\n      this.eventsMap[eventName],\n      { once }\n    );\n\n    return currentTarget;\n  };\n\n  once = ({ eventName, target, handler, delegatedTarget }: DelegatedEvent) =>\n    this.on({\n      eventName,\n      target,\n      handler,\n      delegatedTarget,\n      once: true\n    });\n\n  off = ({ delegatedTarget, eventName }: DelegatedEvent): boolean => {\n    delegatedTarget.removeEventListener(\n      this.extractEventName(eventName),\n      this.eventsMap[eventName]\n    );\n    return delete this.eventsMap[eventName];\n  };\n\n  fire = ({ delegatedTarget, eventName }: DelegatedEvent): boolean => {\n    const evt = document.createEvent('Event');\n    evt.initEvent(this.extractEventName(eventName), true, true);\n    return delegatedTarget.dispatchEvent(evt);\n  };\n}\n\nconst EventDelegationSingleton = new EventDelegation();\nObject.freeze(EventDelegationSingleton);\n\nexport default EventDelegationSingleton;\n"],"names":["EventDelegationSingleton","constructor","this","eventName","split","target","handler","delegatedTarget","once","newEvent","currentTarget","handlerParams","event","parentNode","undefined","matches","originalEvent","eventsMap","addEventListener","extractEventName","on","removeEventListener","evt","document","createEvent","initEvent","dispatchEvent","Object","freeze"],"mappings":"+MAsFA,MAAMA,EAA2B,IA9EjC,MAAAC,cACUC,eAAY,GAEpBA,sBAAoBC,GAAcA,EAAUC,MAAM,KAAK,GAEvDF,QAAK,EACHC,UAAAA,EACAE,OAAAA,EACAC,QAAAA,EACAC,gBAAAA,EACAC,KAAAA,GAAO,MAEP,IAAIC,EACAC,EAAgBH,EACpB,MAAMI,EAAgB,CACpBR,UAAAA,EACAO,cAAAA,EACAH,gBAAAA,GAkCF,OA1BEE,EALGJ,EAKSO,IAEV,IADAF,EAAgBE,EAAMP,OAGpBK,GAAiBA,IAAkBH,EACnCG,EAAgBA,EAAcG,WAE9B,QAC4BC,IAA1BJ,EAAcK,SACdL,EAAcK,QAAQV,GACtB,CACAC,OAAaK,GAAeD,cAAAA,EAAeM,cAAeJ,KAC1D,QAhBMA,IACVN,OAAaK,GAAeK,cAAeJ,MAqB/CV,KAAKe,UAAUd,GAAaM,EAE5BF,EAAgBW,iBACdhB,KAAKiB,iBAAiBhB,GACtBD,KAAKe,UAAUd,GACf,CAAEK,KAAAA,IAGGE,GAGTR,UAAO,EAAGC,UAAAA,EAAWE,OAAAA,EAAQC,QAAAA,EAASC,gBAAAA,KACpCL,KAAKkB,GAAG,CACNjB,UAAAA,EACAE,OAAAA,EACAC,QAAAA,EACAC,gBAAAA,EACAC,MAAM,IAGVN,SAAM,EAAGK,gBAAAA,EAAiBJ,UAAAA,MACxBI,EAAgBc,oBACdnB,KAAKiB,iBAAiBhB,GACtBD,KAAKe,UAAUd,gBAEEc,UAAUd,IAG/BD,UAAO,EAAGK,gBAAAA,EAAiBJ,UAAAA,MACzB,MAAMmB,EAAMC,SAASC,YAAY,SAEjC,OADAF,EAAIG,UAAUvB,KAAKiB,iBAAiBhB,IAAY,GAAM,GAC/CI,EAAgBmB,cAAcJ,MAKzCK,OAAOC,OAAO5B"}