function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}class t{constructor(){return this.eventsMap=[],this.addEvent=(e,t,n)=>(this.eventsMap.push({element:e,eventName:t,handler:n}),n),this.removeEvents=(e,t)=>(this.eventsMap=this.eventsMap.filter((n,s)=>n.element===e&&n.eventName===t&&delete this.eventsMap[s]&&1),!1),this.getEvents=e=>e?this.eventsMap.filter(t=>t.eventName===e):this.eventsMap,this.clearEvents=()=>{this.eventsMap=[]},t.instance?t.instance:(t.instance=this,this)}}export default class extends t{constructor(){super(...arguments),this.on=({events:t,elements:n,targets:s,handler:r,once:a=!1})=>{this.candidates(n,t,(t,n)=>{t.addEventListener(this.extractEventName(n),this.addEvent(t,n,a=>{let i={event:n,delegatedTarget:t,currentTarget:t,originalEvent:a};if(s){const t=a.target.closest(s);if(!t)return!1;i=e({},i,{currentTarget:t||i.delegatedTarget})}return r(i)}),{once:a})})},this.once=({events:e,elements:t,targets:n,handler:s})=>this.on({events:e,elements:t,targets:n,handler:s,once:!0}),this.off=({elements:e,events:t})=>{const n=[];return this.getEvents().forEach(s=>{this.candidates(e,t,(e,t)=>{e.removeEventListener(this.extractEventName(t),s.handler),n.push(this.removeEvents(e,t))})}),n},this.fire=({elements:e,events:t})=>{const n=[],s=document.createEvent("Event");return this.candidates(e,t,(e,t)=>{s.initEvent(this.extractEventName(t),!0,!0),n.push(e.dispatchEvent(s))}),n},this.candidates=(e,t,n)=>{const s="string"==typeof e?document.querySelectorAll(e):[e],r=t.split(" ");s.forEach(e=>r.forEach(t=>n(e,t)))},this.extractEventName=e=>e.split(".")[0]}}
